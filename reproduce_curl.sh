#!/bin/bash
curl -v -X POST https://api.clusterra.cloud/v1/internal/connect/ten_b68ffca90322 \
  -H 'Content-Type: application/json' \
  -H 'X-AWS-STS-Token: eyJ1cmwiOiAiaHR0cHM6Ly9zdHMuYXAtc291dGgtMS5hbWF6b25hd3MuY29tLyIsICJoZWFkZXJzIjogeyJDb250ZW50LVR5cGUiOiAiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIiwgIlgtQW16LURhdGUiOiAiMjAyNjAxMjdUMTA0MjA3WiIsICJBdXRob3JpemF0aW9uIjogIkFXUzQtSE1BQy1TSEEyNTYgQ3JlZGVudGlhbD1BS0lBVU80TVBaSEtCT0tRWU1QQy8yMDI2MDEyNy9hcC1zb3V0aC0xL3N0cy9hd3M0X3JlcXVlc3QsIFNpZ25lZEhlYWRlcnM9Y29udGVudC10eXBlO2hvc3Q7eC1hbXotZGF0ZSwgU2lnbmF0dXJlPWFkYjE3ODc3Y2NiNWE4MzgwYTEwNTZkMmU2Y2NmMDc5YzVlYWQzYTNkZjI2MjliYWU2MjMyNDVmZmE4MmE2NmUifSwgImJvZHkiOiAiQWN0aW9uPUdldENhbGxlcklkZW50aXR5JlZlcnNpb249MjAxMS0wNi0xNSJ9' \
  -d '{"cluster_id": "clus458f", "cluster_name": "clusterra-demo-27-jan", "aws_account_id": "909742510020", "region": "ap-south-1", "lattice_service_endpoint": "clusterra-svc-clus458f-07cf5a29c4bad810a.7d67968.vpc-lattice-svcs.ap-south-1.on.aws", "lattice_service_arn": "arn:aws:vpc-lattice:ap-south-1:909742510020:service/svc-07cf5a29c4bad810a", "lattice_service_network_id": "sn-0f72eeda2ea824169", "slurm_port": 6830, "slurm_jwt_secret_arn": "arn:aws:secretsmanager:ap-south-1:909742510020:secret:clusterra-jwt-clus458f-mGdRGN", "iam_role_arn": "arn:aws:iam::909742510020:role/clusterra-role-clus458f", "iam_external_id": "clusterra-clusterra-demo-27-jan", "head_node_instance_id": "i-0ee97e97b0836c13b"}'
